{% extends "_layout" %}
{% block content %}
    <main id="main" class="c-past-seasons">
        <div class="c-hero">
            <div class="c-hero__container">
                <div class="c-hero__image">
                    {% set image = entry.seasonPastSeasonHero.one() %}
                    {% set imageResizes = [{ width: 1200, height: 400, mode: 'crop', position: image.getFocalPoint() }, { width: 600, height: 200, mode: 'crop', position: image.getFocalPoint() }] %}
                    {% set srcSizes = '(max-width: 640px) 640px, (max-width: 768) 768px, 1100px' %}
                    {% include '_partials/image' %}
                </div>
                <div class="c-hero__copy">
                    <h1>{{ entry.title }}</h1>
                </div>
            </div>
        </div>

        <div class="c-past-seasons__main">
            {% set seasons = craft.categories().group('seasons').limit(6) %}
            {% paginate seasons as pageInfo, pageEntries %}
            {% for season in pageEntries %}
                {% set filter = craft.categories.slug(season.title) %}
                {% set entries = craft.entries.section('shows').relatedTo(filter).all() %}
                {% if entries | length %}
                    <div class="c-past-seasons__main__container">
                        <div class="c-past-seasons__main__season">
                            <h2><a href="{{ season.url }}">Season {{ season.title }}</a></h2>
                            {{ season.seasonYears }}
                        </div>
                        <div class="c-past-seasons__main__shows">
                            {% for entry in entries %}
                                <a href="{{ entry.url }}" class="c-past-seasons__main__show">
                                    {% set image = entry.showMainImage.one() %}
                                    {% set imageResizes = [{ width: 200, height: 200, mode: 'crop', position: image.getFocalPoint() }] %}
                                    {% set srcSizes = '200px' %}
                                    {% include '_partials/image' %}
                                    <h3>{{ entry.title }}</h3>
                                </a>
                            {% endfor %}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            <div class="c-past-seasons__pagination">
                <div class="c-past-seasons__pagination__container">
                    <a class="first-page" href="{{ pageInfo.firstUrl }}">First Page</a>
                    {% if pageInfo.prevUrl %}<a class="page-arrow prev" href="{{ pageInfo.prevUrl }}">&#8249;</a>{% endif %}

                    {% for page, url in pageInfo.getPrevUrls(2) %}
                        <a href="{{ url }}">{{ page }}</a>
                    {% endfor %}

                    <span class="current">{{ pageInfo.currentPage }}</span>

                    {% for page, url in pageInfo.getNextUrls(2) %}
                        <a href="{{ url }}">{{ page }}</a>
                    {% endfor %}

                    {% if pageInfo.nextUrl %}<a class="page-arrow next" href="{{ pageInfo.nextUrl }}">&#8250;</a>{% endif %}
                    <a class="last-page" href="{{ pageInfo.lastUrl }}">Last Page</a>
                </div>
            </div>
        </div>
    </main>
{% endblock %}
