{% extends "_layout" %}
{% block content %}
    <main id="main" class="c-past-seasons">
        <div class="c-hero">
            <div class="c-hero__container">
                <div class="c-hero__image">
                    {% set image = entry.seasonPastSeasonHero.one() %}
                    {% set imageResizes = [{ width: 1200, height: 400, mode: 'crop', position: image.getFocalPoint() }, { width: 600, height: 200, mode: 'crop', position: image.getFocalPoint() }] %}
                    {% set srcSizes = '(max-width: 640px) 640px, (max-width: 768) 768px, 1100px' %}
                    {% include '_partials/image' %}
                </div>
                <div class="c-hero__copy">
                    <h1>{{ entry.title }}</h1>
                </div>
            </div>
        </div>

        <div class="c-past-seasons__main">
            {% set seasons = craft.categories().group('seasons').all() %}
            {% for season in seasons %}
                {% set filter = craft.categories.slug(season.title) %}
                <div class="c-past-seasons__main__container">
                    <div class="c-past-seasons__main__season">
                        <h2>Season {{ season.title }}</h2>
                        {{ season.seasonYears }}
                    </div>
                    <div class="c-past-seasons__main__shows">
                        {% set shows = craft.entries.section('shows').relatedTo(filter).all() %}
                        {% for entry in shows %}
                            <a href="{{ entry.url }}" class="c-past-seasons__main__show">
                                {% set image = entry.showMainImage.one() %}
                                {% set imageResizes = [{ width: 200, height: 200, mode: 'crop', position: image.getFocalPoint() }] %}
                                {% set srcSizes = '200px' %}
                                {% include '_partials/image' %}
                                <h3>{{ entry.title }}</h3>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </main>
{% endblock %}
